<% raise "Wrong condition given" unless condition.in?([:today, :upcoming, :previous])%>
<h5 style="text-align: center">
  <%= t("events.#{condition}") %>
</h5>

<div id="<%= accordionID %>">
    <% @domain.events.order(:begin_at).send(condition).each do |event| %>
      <div class="filterable <%= event.planner%>">
        <div class="card mb-1 rounded" style="width: 100%; border: 2px solid <%= @domain.colors["primary-color"] %>">
          <div class="card-header rounded" id="heading<%= event["id"] %>">
            <h5 class="mb-0">
              <button
                class="btn btn-primary outline btn-lg btn-block border-0 rounded"
                data-toggle="collapse"
                data-target="#collapse<%= event.id %>"
                aria-expanded="true"
                aria-controls="collapse<%= event.id %>"
                style="color: <%= @domain.colors["primary-color"] %>; border: 2px solid <%= @domain.colors["primary-color"] %>"
              >
                <p class="align-left"><%= event.title %></p>
                <p class="align-right"><%= l(event.begin_at, format: :short) %></p>

                <div style="clear: both;"></div>
              </button>
            </h5>
          </div>

          <div id="collapse<%= event.id %>" class="collapse" aria-labelledby="heading<%= event.id %>" data-parent="#accordionParent">
            <div class="card-body rounded mt-01">
              <div class="row">
                <div class="col">
                  <%= raw(event.description) %>
                </div>
                <div class="col-4">
                  <div id="eventmap<%= event.id %>" style="height: 100%;min-height:150px"></div>
                    <% content_for :init_maps do %>
                      var location = {lat: <%= event.lat %>, lng: <%= event.lng %>}
                      window.rus_maps[<%= event.id %>] = new google.maps.Map(document.getElementById('eventmap<%= event.id %>'), {
                        center: location,
                        disableZoom: true,
                        zoom: 11
                      });

                      var marker = new google.maps.Marker({
                        position: location,
                        map: window.rus_maps[<%= event.id %>]
                      });
                    <% end %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
